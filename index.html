<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Quadra 1 - Tabela Interativa</title>
    <style>
        table, th, td {
            border: 1px solid black;
            border-collapse: collapse;
            text-align: center;
        }
        th, td {
            padding: 10px;
            min-width: 100px;
        }
        th {
            background-color: #f2f2f2;
        }
        .form-container {
            margin: 20px 0;
        }
    </style>
    <!-- Firebase App (necessário) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <!-- Firestore -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore.js"></script>
</head>
<body>
    <h2>Quadra 1 - Coberta</h2>
    <div class="form-container">
        <form id="dataForm">
            <label for="dia">Dia:</label>
            <select id="dia">
                <option value="1">Segunda-Feira</option>
                <option value="2">Terça-Feira</option>
                <option value="3">Quarta-Feira</option>
                <option value="4">Quinta-Feira</option>
                <option value="5">Sexta-Feira</option>
                <option value="6">Sábado</option>
                <option value="7">Domingo</option>
            </select>
            <label for="hora">Horário:</label>
            <select id="hora">
                <option value="1">07:00 - 08:00</option>
                <option value="2">08:00 - 09:00</option>
                <option value="3">09:00 - 10:00</option>
                <option value="4">10:00 - 11:00</option>
                <option value="5">11:00 - 12:00</option>
                <option value="6">12:00 - 13:00</option>
                <option value="7">13:00 - 14:00</option>
                <option value="8">14:00 - 15:00</option>
                <option value="9">15:00 - 16:00</option>
                <option value="10">16:00 - 17:00</option>
                <option value="11">17:00 - 18:00</option>
                <option value="12">18:00 - 19:00</option>
                <option value="13">19:00 - 20:00</option>
                <option value="14">20:00 - 21:00</option>
                <option value="15">21:00 - 22:00</option>
                <option value="16">22:00 - 23:00</option>
            </select>
            <label for="valor">Valor:</label>
            <input type="text" id="valor" placeholder="Insira o valor">
            <button type="button" onclick="adicionarDados()">Adicionar</button>
        </form>
    </div>
    <table id="tabelaQuadra">
        <tr>
            <th>Horário</th>
            <th>26/set</th>
            <th>24/set</th>
            <th>25/set</th>
            <th>26/set</th>
            <th>27/set</th>
            <th>28/set</th>
            <th>29/set</th>
            <th>Horário</th>
        </tr>
        <tr>
            <th></th>
            <th>Segunda-Feira</th>
            <th>Terça-Feira</th>
            <th>Quarta-Feira</th>
            <th>Quinta-Feira</th>
            <th>Sexta-Feira</th>
            <th>Sábado</th>
            <th>Domingo</th>
            <th></th>
        </tr>
        <!-- Linhas da tabela -->
        <tr><td>07:00 - 08:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>07:00 - 08:00</td></tr>
        <tr><td>08:00 - 09:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>08:00 - 09:00</td></tr>
        <tr><td>09:00 - 10:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>09:00 - 10:00</td></tr>
        <tr><td>10:00 - 11:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>10:00 - 11:00</td></tr>
        <tr><td>11:00 - 12:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>11:00 - 12:00</td></tr>
        <tr><td>12:00 - 13:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>12:00 - 13:00</td></tr>
        <tr><td>13:00 - 14:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>13:00 - 14:00</td></tr>
        <tr><td>14:00 - 15:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>14:00 - 15:00</td></tr>
        <tr><td>15:00 - 16:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>15:00 - 16:00</td></tr>
        <tr><td>16:00 - 17:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>16:00 - 17:00</td></tr>
        <tr><td>17:00 - 18:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>17:00 - 18:00</td></tr>
        <tr><td>18:00 - 19:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>18:00 - 19:00</td></tr>
        <tr><td>19:00 - 20:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>19:00 - 20:00</td></tr>
        <tr><td>20:00 - 21:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>20:00 - 21:00</td></tr>
        <tr><td>21:00 - 22:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>21:00 - 22:00</td></tr>
        <tr><td>22:00 - 23:00</td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td>22:00 - 23:00</td></tr>
    </table>
    
    <script>
        // Configuração do Firebase
        const firebaseConfig = {
         apiKey: "AIzaSyAwOD-lKJitfnGiHz_TCu-hIKL3EXjFKnw",
         authDomain: "clube-olimpico-agenda.firebaseapp.com",
         projectId: "clube-olimpico-agenda",
         storageBucket: "clube-olimpico-agenda.appspot.com",
         messagingSenderId: "71214934594",
         appId: "1:71214934594:web:004d7e17db761197ed5bdb",
         measurementId: "G-C845MDX25V"
        };

        // Inicializa o Firebase
        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore(); // Inicializa o Firestore

        // Função para salvar dados no Firestore
        function salvarDados(dia, hora, valor) {
            db.collection("minhaColecao").add({
                dia: dia,
                hora: hora,
                valor: valor
            })
            .then(() => {
                console.log("Dados salvos com sucesso!");
                carregarTabela(); // Atualiza a tabela após salvar
            })
            .catch((error) => {
                console.error("Erro ao salvar dados: ", error);
            });
        }

        // Função para adicionar dados e salvar no Firestore
        function adicionarDados() {
            var dia = document.getElementById("dia").value;
            var hora = document.getElementById("hora").value;
            var valor = document.getElementById("valor").value;

            if (!valor) {
                alert("Por favor, insira um valor.");
                return;
            }

            // Salva os dados no Firestore
            salvarDados(dia, hora, valor);

            // Limpa o campo de valor para a próxima inserção
            document.getElementById("valor").value = "";
        }

        // Função para carregar os dados do Firestore na tabela
        function carregarTabela() {
            db.collection("minhaColecao").get().then((querySnapshot) => {
                // Limpa a tabela antes de carregar novos dados
                const tabela = document.getElementById("tabelaQuadra");
                for (let i = 1; i < tabela.rows.length; i++) {
                    for (let j = 1; j < tabela.rows[i].cells.length; j++) {
                        tabela.rows[i].cells[j].innerText = ""; // Limpa a célula
                    }
                }
                // Preenche a tabela com os dados recuperados
                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const linhaTabela = parseInt(data.hora);
                    const colunaTabela = parseInt(data.dia);
                    tabela.rows[linhaTabela].cells[colunaTabela].innerText = data.valor;
                });
            });
        }

        // Carrega os dados do Firestore ao iniciar a página
        window.onload = function() {
            carregarTabela();
        };
    </script>
</body>
</html>
